# MyPacman

开发软件：VS2019， Win10

使用的图形库 easyx， 下载地址 https://easyx.cn/

使用的图片素材 /pacman2/res



吃豆人总架构

- 初始化

- 设置多线程

  - 按键输入
  - 定时器（控制帧率）

- 初始化游戏菜单页

- 主循环

  - 处理按键输入

    - 游戏菜单页处理

      页与页的切换由专门的函数负责，该函数在切换页的同时，处理好新页的初始化问题

      - 页切换函数
        - 游戏菜单页初始化
          - 初始化基本界面
        - 游戏进行页初始化
          - 初始化地图、背景图片、吃豆人、怪物
        - 游戏结束页初始化
          - 初始化基本界面

    - 游戏进行页处理

    - 游戏结束页处理

  - 游戏逻辑更新

    - 游戏菜单页更新
    - 游戏进行页更新
      - 清除旧图像
      - 计算新位置
      - 绘制新图像
      - 判断游戏是否结束
        - 吃完所有豆子
        - 被怪物吃掉
    - 游戏结束页更新

- 退出



类关系

- CMover
  - CMonster 派生
  - CPacman 派生
- CFlash
  - CFlashGroup 容器
- CPoint
  - CRect 组合



吃豆人采用传统的A star算法计算路径，参考资料 https://blog.csdn.net/m0_37290785/article/details/93203624

对A star的实现做了一定的优化：

取消close_list，直接使用哈希表存储节点是否关闭，大大提高了A star的计算速度

在初始化节点网络时计算并存储各个节点的距离代价（H值），为后来计算总代价（F值）提供方便



![吃豆人总架构](吃豆人总架构.png)

![处理按键输入](处理按键输入.png)

![主循环](主循环.png)

![类关系](类关系.png)

